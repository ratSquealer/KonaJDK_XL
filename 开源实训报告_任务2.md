# Tencent KonaJDK

# 任务2

## G1 GC学习

G1是一种**服务器端**的垃圾收集器，应用在多处理器和大容量内存环境中，在实现高吞吐量的同时，尽可能的满足垃圾收集暂停时间的要求。

## 1.1 编译文件

在Linux环境下Ubuntu22.04，通过命令行参数传递给 `configure` 脚本。

```bash
bash configure --with-boot-jdk=/home/cxl/projects/TencentKona/TencentKona-17.0.11.b1 --with-jtreg=/home/cxl/projects/TencentKona/tools/jtreg
```

- 通过`--with-jvm-features=-shenandoahgc`中的`-`是否存在来决定是否开启或关闭某一个jvm特性，本次没有关闭，默认开启（也可以通过`--with-jvm-features=shenandoahgc`再开启）。
- 通过`--with-boot-jdk=/home/cxl/projects/TencentKona/TencentKona-17.0.11.b1`，使用存在的 JDK 来编译新的 JDK。
- 通过`--with-jtreg=/home/cxl/projects/TencentKona/tools/jtreg`，指定jtreg工具路径，以确保在OpenJDK构建过程中能够正确地找到并使用`jtreg`来运行测试用例。

![微信图片_20240828142839](imgs/微信图片_20240828142839.png)

测试案例成功产生`JTreport`和`JTwork`文件

- 小错误：java自带环境变量为java8，删除且修改成java17后仍然找不到jdk17 的路径报错如下：

  ![QQ图片20240830100627](D:\Study\javaStudy\Tencent\imgs\QQ图片20240830100627.png)

- 修改后，设置当前终端的环境变量，命令结果如下：

  - ```bash
    export JAVA_HOME=/home/cxl/projects/TencentKona/TencentKona-17-TencentKona-17.0.11/build/linux-x86_64-server-release/images/jdk 
    export PATH=$JAVA_HOME/bin:$PATH
    ```

    ![](D:\Study\javaStudy\Tencent\imgs\微信图片_20240830100729.png)

    

